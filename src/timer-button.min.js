function TimerButton(e,t,n,r,i,s,o,u,a,f,l,c){this.interactionType=t,this.elementId=e;this.size=n,this.center=n*.5,this.radius=n*.5,this.strokeWidth=r,this.strokeColor=i,this.centerColor=s,this.label=o,this.fontSize=u,this.fontColor=a,this.fontFamily=f,this.duration=l,this.time=0,this.now=null,this.then=null,this.intervalDelay=10,this.callback=c,this.progress=0,this.timer=null,this.isRunning=false,this.init=function(){var e=this;var t=document.getElementById(this.elementId);var n="width: "+this.size+"px; height: "+this.size+"px; cursor: pointer; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; -o-user-select: none; user-select: none; outline: none;";t.setAttribute("style",n);t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+this.size+'" height="'+this.size+'"><defs><mask id="timer-button-circle-cutout"><rect width="100%" height="100%" fill="white"/><circle r="'+(this.radius-this.strokeWidth)+'" cx="'+this.center+'" cy="'+this.center+'" /></mask></defs><path id="timer-button-pie" d="" fill="'+this.strokeColor+'" mask="url(\'#timer-button-circle-cutout\')" /><circle r="'+(this.radius-this.strokeWidth*1.25)+'" cx="'+this.center+'" cy="'+this.center+'" fill="'+this.centerColor+'" /><text x="'+this.center+'" y="'+(this.center+this.fontSize*.5)+'" font-family="'+this.fontFamily+'" font-size="'+this.fontSize+'" fill="'+this.fontColor+'" font-weight="bold" text-anchor="middle" id="timer-button-label">'+o+"</text></svg>";t.onselectstart=function(){return false};if(this.interactionType=="hover"){this.addEvent(t,"mouseover",function(n){if(e.isWithinElement(n,t))e.startTimer()});this.addEvent(t,"mouseout",function(n){if(!e.isWithinElement(n,t))e.stopTimer()})}else if(this.interactionType=="hold"){if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch){this.addEvent(t,"touchstart",function(t){e.startTimer()});this.addEvent(window,"touchend",function(t){e.stopTimer()})}else{this.addEvent(t,"mousedown",function(t){e.startTimer()});this.addEvent(window,"mouseup",function(t){e.stopTimer()})}}},this.drawPie=function(e,t){var n=.0174532925;var r=e*n;var i=t*n;var s=this.center+this.radius*Math.sin(r);var o=this.center-this.radius*Math.cos(r);var u=this.center+this.radius*Math.sin(i);var a=this.center-this.radius*Math.cos(i);var f=0;if(i-r>Math.PI)f=1;var l="M "+this.center+","+this.center+" L "+s+","+o+" A "+this.radius+","+this.radius+" 0 "+f+" 1 "+u+","+a+" Z";document.getElementById(this.elementId).childNodes[0].childNodes[1].setAttribute("d",l)},this.startTimer=function(){if(this.isRunning)return;var e=this;this.isRunning=true;this.now=Date.now();this.then=Date.now();if(!window.requestAnimationFrame){this.timer=window.setInterval(function(){e.stepTimer()},this.intervalDelay)}else{this.timer=window.requestAnimationFrame(function(){e.stepTimer()})}},this.stopTimer=function(){if(!this.isRunning)return;if(!window.requestAnimationFrame){clearInterval(this.timer)}else{window.cancelAnimationFrame(this.timer)}this.setProgress(0);this.isRunning=false;this.time=0;this.resetDisplay()},this.stepTimer=function(){this.now=Date.now();var e=this.now-this.then;this.then=this.now;var t=this;this.time+=e;var n=this.time/this.duration;this.setProgress(n*100);this.updateDisplay();if(this.progress>=100){if(!window.requestAnimationFrame){clearInterval(this.timer)}else{window.cancelAnimationFrame(this.timer)}this.isRunning=false;this.callback();this.time=0}else{if(window.requestAnimationFrame)this.timer=window.requestAnimationFrame(function(){t.stepTimer()})}},this.setProgress=function(e){this.progress=Math.max(0,Math.min(100,e))},this.getProgress=function(){return this.progress},this.updateDisplay=function(){this.drawPie(0,this.progress*.01*359.999)},this.resetDisplay=function(){document.getElementById(this.elementId).childNodes[0].childNodes[1].setAttribute("d","");document.getElementById(this.elementId).childNodes[0].childNodes[3].textContent=this.label},this.loadingUpdate=function(e){document.getElementById(this.elementId).childNodes[0].childNodes[3].textContent=String(Math.round(e*100))+"%";this.setProgress(e*100);this.updateDisplay()},this.addEvent=function(e,t,n){if(e.attachEvent){e["e"+t+n]=n;e[t+n]=function(){e["e"+t+n](window.event)};e.attachEvent("on"+t,e[t+n])}else e.addEventListener(t,n,false)},this.removeEvent=function(e,t,n){if(e.detachEvent){e.detachEvent("on"+t,e[t+n]);e[t+n]=null}else e.removeEventListener(t,n,false)},this.isWithinElement=function(e,t){var n=t.getClientRects();n=n[0];var r=e.pageX-n.left;var i=e.pageY-n.top;return r>0&&r<n.width&&i>0&&i<n.height},this.init()}